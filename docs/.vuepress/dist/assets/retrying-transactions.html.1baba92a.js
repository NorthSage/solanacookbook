import{_ as c,r as t,o as p,c as u,a,b as s,w as e,F as k,d as n,e as i}from"./app.31cab234.js";var d="/assets/tx-journey.dd6310be.png",m="/assets/tpu-jito-labs.8bb32fb6.png",h="/assets/dropped-via-rpc-pool.8d1ce9af.png",b="/assets/dropped-minority-fork-pre-process.555653e1.png",_="/assets/dropped-minority-fork-post-process.48c3c955.png";const y={},f=a("h1",{id:"sinusubukang-muli-ang-mga-transaksyon",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#sinusubukang-muli-ang-mga-transaksyon","aria-hidden":"true"},"#"),n(" Sinusubukang muli ang mga Transaksyon")],-1),w=n("Sa ilang mga pagkakataon, ang isang tila wastong transaksyon ay maaaring i-drop bago ito isama sa isang bloke. Madalas itong nangyayari sa mga panahon ng pagsisikip ng network, kapag nabigo ang isang RPC node na i-rebroadcast ang transaksyon sa "),P={href:"https://docs.solana.com/terminology#leader",target:"_blank",rel:"noopener noreferrer"},v=n("lider"),S=n(". Sa isang end-user, maaaring lumitaw na parang ganap na nawala ang kanilang transaksyon. Habang ang mga RPC node ay nilagyan ng generic na rebroadcasting algorithm, ang mga developer ng application ay may kakayahang bumuo ng kanilang sariling custom na rebroadcasting logic."),T=i('<h2 id="mga-katotohanan" tabindex="-1"><a class="header-anchor" href="#mga-katotohanan" aria-hidden="true">#</a> Mga Katotohanan</h2><div class="custom-container tip"><p class="custom-container-title">Fact Sheet</p><ul><li>Susubukan ng mga RPC node na i-rebroadcast ang mga transaksyon gamit ang isang generic na algorithm</li><li>Maaaring ipatupad ng mga developer ng application ang kanilang sariling custom na rebroadcasting logic</li><li>Dapat samantalahin ng mga developer ang parameter na <code>maxRetries</code> sa <code>sendTransaction</code> JSON-RPC method</li><li>Dapat paganahin ng mga developer ang mga pagsusuri sa preflight upang magtaas ng mga error bago isumite ang mga transaksyon</li><li>Bago muling pumirma sa anumang transaksyon, <strong>napakahalaga</strong> upang matiyak na ang blockhash ng paunang transaksyon ay nag-expire na</li></ul></div><h2 id="ang-paglalakbay-ng-isang-transaksyon" tabindex="-1"><a class="header-anchor" href="#ang-paglalakbay-ng-isang-transaksyon" aria-hidden="true">#</a> Ang Paglalakbay ng isang Transaksyon</h2><h3 id="paano-nagsusumite-ang-mga-kliyente-ng-mga-transaksyon" tabindex="-1"><a class="header-anchor" href="#paano-nagsusumite-ang-mga-kliyente-ng-mga-transaksyon" aria-hidden="true">#</a> Paano Nagsusumite ang Mga Kliyente ng Mga Transaksyon</h3><p>Sa Solana, walang konsepto ng mempool. Ang lahat ng mga transaksyon, pinasimulan man ang mga ito sa programmatically o ng isang end-user, ay mahusay na iruruta sa mga pinuno upang maproseso ang mga ito sa isang block. Mayroong dalawang pangunahing paraan kung saan maaaring maipadala ang isang transaksyon sa mga pinuno:</p>',5),R=n("Sa pamamagitan ng proxy sa pamamagitan ng isang RPC server at ang "),x={href:"https://docs.solana.com/developing/clients/jsonrpc-api#sendtransaction",target:"_blank",rel:"noopener noreferrer"},C=n("sendTransaction"),B=n(" JSON-RPC method"),K=n("Direkta sa mga pinuno sa pamamagitan ng "),L={href:"https://docs.rs/solana-client/1.7.3/solana_client/tpu_client/index.html",target:"_blank",rel:"noopener noreferrer"},M=n("TPU Client"),A=a("p",null,"Ang karamihan sa mga end-user ay magsusumite ng mga transaksyon sa pamamagitan ng isang RPC server. Kapag ang isang kliyente ay nagsumite ng isang transaksyon, ang tatanggap na RPC node ay susubukan namang i-broadcast ang transaksyon sa kasalukuyan at susunod na mga pinuno. Hanggang sa ang transaksyon ay naproseso ng isang pinuno, walang talaan ng transaksyon sa labas ng kung ano ang nalalaman ng kliyente at ng mga relaying RPC node. Sa kaso ng isang TPU client, ang rebroadcast at pagpapasa ng lider ay ganap na pinangangasiwaan ng software ng kliyente.",-1),j=a("p",null,[a("img",{src:d,alt:"Transaction Journey"})],-1),H=a("h3",{id:"paano-mga-transaksyon-sa-pag-broadcast-ng-rpc-nodes",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#paano-mga-transaksyon-sa-pag-broadcast-ng-rpc-nodes","aria-hidden":"true"},"#"),n(" Paano Mga Transaksyon sa Pag-broadcast ng RPC Nodes")],-1),z=n("Pagkatapos makatanggap ng transaksyon ang isang RPC node sa pamamagitan ng "),U=a("code",null,"sendTransaction",-1),V=n(", iko-convert nito ang transaksyon sa isang "),D={href:"https://en.wikipedia.org/wiki/User_Datagram_Protocol",target:"_blank",rel:"noopener noreferrer"},N=n("UDP"),I=n(" packet bago ito ipasa sa mga nauugnay na pinuno. Pinapayagan ng UDP ang mga validator na mabilis na makipag-ugnayan sa isa't isa, ngunit hindi nagbibigay ng anumang mga garantiya tungkol sa paghahatid ng transaksyon."),E=n("Dahil alam nang maaga ang iskedyul ng pinuno ng Solana sa bawat "),F={href:"https://docs.solana.com/terminology#epoch",target:"_blank",rel:"noopener noreferrer"},q=n("panahon"),J=n(" (~2 araw), direktang i-broadcast ng isang RPC node ang transaksyon nito sa kasalukuyan at susunod na mga pinuno. Kabaligtaran ito sa iba pang mga protocol ng tsismis tulad ng Ethereum na nagpapalaganap ng mga transaksyon nang random at malawak sa buong network. Bilang default, susubukan ng mga RPC node na ipasa ang mga transaksyon sa mga pinuno bawat dalawang segundo hanggang sa ma-finalize ang transaksyon o mag-expire ang blockhash ng transaksyon (150 block o ~1 minuto 19 segundo mula sa oras ng pagsulat na ito). Kung ang natitirang rebroadcast na laki ng queue ay mas malaki kaysa sa "),O={href:"https://github.com/solana-labs/solana/blob/bfbbc53dac93b3a5c6be9b4b65f679fdb13e41d9/send-transaction-service/src/send_transaction_service.rs#L20",target:"_blank",rel:"noopener noreferrer"},G=n("10,000 mga transaksyon"),W=n(". ay ibinaba. May command-line "),Y={href:"https://github.com/solana-labs/solana/blob/bfbbc53dac93b3a5c6be9b4b65f679fdb13e41d9/validator/src/main.rs#L1172",target:"_blank",rel:"noopener noreferrer"},Q=n("mga argumento"),X=n(" na maaaring isaayos ng mga operator ng RPC ang default na gawi na ito para baguhin ang default na pag-uugali. lohika."),Z=a("p",null,"Kapag nag-broadcast ang isang RPC node ng isang transaksyon, susubukan nitong ipasa ang transaksyon sa [Transaction Processing Unit (TPU)] ng isang lider(https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/validator.rs#L867). Pinoproseso ng TPU ang mga transaksyon sa limang natatanging yugto:",-1),$={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/fetch_stage.rs#L21",target:"_blank",rel:"noopener noreferrer"},aa=n("Fetch Stage"),na={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/tpu.rs#L91",target:"_blank",rel:"noopener noreferrer"},sa=n("SigVerify Stage"),oa={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/banking_stage.rs#L249",target:"_blank",rel:"noopener noreferrer"},ta=n("Banking Stage"),ea={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/poh/src/poh_service.rs",target:"_blank",rel:"noopener noreferrer"},ia=n("Proof of History Service"),ra={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/tpu.rs#L136",target:"_blank",rel:"noopener noreferrer"},la=n("Broadcast Stage"),ga=a("p",null,[a("img",{src:m,alt:"TPU Overview"}),a("small",{style:{display:"block","text-align":"center"}},"Image Courtesy of Jito Labs")],-1),ca=a("p",null,"Sa limang yugtong ito, ang Fetch Stage ang may pananagutan sa pagtanggap ng mga transaksyon. Sa loob ng Fetch Stage, ikakategorya ng mga validator ang mga papasok na transaksyon ayon sa tatlong port:",-1),pa={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L27",target:"_blank",rel:"noopener noreferrer"},ua=n("tpu"),ka=n(" humahawak ng mga regular na transaksyon tulad ng mga paglilipat ng token, NFT mints, at mga tagubilin sa programa"),da={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L31",target:"_blank",rel:"noopener noreferrer"},ma=n("tpu_vote"),ha=n(" eksklusibong nakatutok sa mga transaksyon sa pagboto"),ba={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L29",target:"_blank",rel:"noopener noreferrer"},_a=n("tpu_forwards"),ya=n(" nagpapasa ng mga hindi naprosesong packet sa susunod na pinuno kung ang kasalukuyang pinuno ay hindi maproseso ang lahat ng mga transaksyon"),fa=n("Para sa higit pang impormasyon sa TPU, mangyaring sumangguni sa "),wa={href:"https://jito-labs.medium.com/solana-validator-101-transaction-processing-90bcdc271143",target:"_blank",rel:"noopener noreferrer"},Pa=n("mahusay na pagsulat na ito ng Jito Labs"),va=n("."),Sa=a("h2",{id:"paano-nababawasan-ang-mga-transaksyon",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#paano-nababawasan-ang-mga-transaksyon","aria-hidden":"true"},"#"),n(" Paano Nababawasan ang Mga Transaksyon")],-1),Ta=a("p",null,"Sa buong paglalakbay ng isang transaksyon, may ilang mga sitwasyon kung saan ang transaksyon ay maaaring hindi sinasadyang i-drop mula sa network.",-1),Ra=a("h3",{id:"bago-maproseso-ang-isang-transaksyon",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#bago-maproseso-ang-isang-transaksyon","aria-hidden":"true"},"#"),n(" Bago maproseso ang isang transaksyon")],-1),xa=n("Kung ang network ay nag-drop ng isang transaksyon, ito ay malamang na gawin ito bago ang transaksyon ay naproseso ng isang pinuno. Ang UDP "),Ca={href:"https://en.wikipedia.org/wiki/Packet_loss",target:"_blank",rel:"noopener noreferrer"},Ba=n("packet loss"),Ka=n(" ay ang pinakasimpleng dahilan kung bakit ito maaaring mangyari. Sa panahon ng matinding pag-load ng network, posible ring ma-overwhelm ang mga validator sa dami ng mga transaksyong kinakailangan para sa pagproseso. Bagama't ang mga validator ay nilagyan ng mga surplus na transaksyon sa pamamagitan ng "),La=a("code",null,"tpu_forwards",-1),Ma=n(", may limitasyon sa dami ng data na maaaring [ipasa](https://github.com/solana-labs/solana/blob/master/core/src /banking_stage.rs#L389). Higit pa rito, ang bawat pasulong ay limitado sa isang solong hop sa pagitan ng mga validator. Ibig sabihin, ang mga transaksyong natanggap sa "),Aa=a("code",null,"tpu_forwards",-1),ja=n(" port ay hindi ipinapasa sa ibang mga validator."),Ha=n("Mayroon ding dalawang hindi gaanong kilalang dahilan kung bakit maaaring i-drop ang isang transaksyon bago ito maproseso. Ang unang senaryo ay nagsasangkot ng mga transaksyon na isinumite sa pamamagitan ng isang RPC pool. Paminsan-minsan, ang bahagi ng RPC pool ay maaaring sapat na nauuna sa natitirang bahagi ng pool. Maaari itong magdulot ng mga isyu kapag ang mga node sa loob ng pool ay kinakailangang magtulungan. Sa halimbawang ito, ang "),za={href:"https://docs.solana.com/developing/programming-model/transactions#recent-blockhash",target:"_blank",rel:"noopener noreferrer"},Ua=n("recentBlockhash"),Va=n(" ng transaksyon ay na-query mula sa advanced na bahagi ng pool (Backend A). Kapag isinumite ang transaksyon sa lagging bahagi ng pool (Backend B), hindi makikilala ng mga node ang advanced blockhash at ibababa ang transaksyon. Maaari itong matukoy sa pagsusumite ng transaksyon kung ie-enable ng mga developer ang "),Da={href:"https://docs.solana.com/developing/clients/jsonrpc-api#sendtransaction",target:"_blank",rel:"noopener noreferrer"},Na=n("preflight checks"),Ia=n(" sa "),Ea=a("code",null,"sendTransaction",-1),Fa=n("."),qa=i('<p><img src="'+h+'" alt="Dropped via RPC Pool"></p><p>Ang pansamantalang network forks ay maaari ding magresulta sa mga bumabagsak na transaksyon. Kung ang validator ay mabagal na i-replay ang mga block nito sa loob ng Banking Stage, maaari itong humantong sa paglikha ng minority fork. Kapag ang isang kliyente ay bumuo ng isang transaksyon, posible para sa transaksyon na sumangguni sa isang <code>recentBlockhash</code> na umiiral lamang sa minority fork. Pagkatapos maisumite ang transaksyon, maaaring lumipat ang cluster mula sa minority fork nito bago maproseso ang transaksyon. Sa sitwasyong ito, ang transaksyon ay bumaba dahil sa blockhash na hindi nahanap.</p><p><img src="'+b+'" alt="Dropped due to Minority Fork (Before Processed)"></p><h3 id="pagkatapos-maproseso-ang-isang-transaksyon-at-bago-ito-ma-finalize" tabindex="-1"><a class="header-anchor" href="#pagkatapos-maproseso-ang-isang-transaksyon-at-bago-ito-ma-finalize" aria-hidden="true">#</a> Pagkatapos maproseso ang isang transaksyon at bago ito ma-finalize</h3><p>Kung ang isang transaksyon ay sumangguni sa isang <code>recentBlockhash</code> mula sa isang minorya na tinidor, posible pa ring maproseso ang transaksyon. Sa kasong ito, gayunpaman, ito ay ipoproseso ng pinuno sa tinidor ng minorya. Kapag sinubukan ng pinunong ito na ibahagi ang mga naprosesong transaksyon nito sa natitirang bahagi ng network, mabibigo itong maabot ang consensus sa karamihan ng mga validator na hindi kumikilala sa minority fork. Sa oras na ito, aalisin ang transaksyon bago ito ma-finalize.</p><p><img src="'+_+'" alt="Dropped due to Minority Fork (After Processed)"></p><h2 id="pangangasiwa-sa-mga-nahulog-na-transaksyon" tabindex="-1"><a class="header-anchor" href="#pangangasiwa-sa-mga-nahulog-na-transaksyon" aria-hidden="true">#</a> Pangangasiwa sa mga Nahulog na Transaksyon</h2><p>Bagama&#39;t susubukan ng mga RPC node na i-rebroadcast ang mga transaksyon, ang algorithm na ginagamit nila ay generic at kadalasang hindi angkop para sa mga pangangailangan ng mga partikular na application. Upang maghanda para sa mga oras ng pagsisikip ng network, dapat i-customize ng mga developer ng application ang kanilang sariling lohika sa pag-rebroadcasting.</p><h3 id="isang-malalim-na-pagtingin-sa-sendtransaction" tabindex="-1"><a class="header-anchor" href="#isang-malalim-na-pagtingin-sa-sendtransaction" aria-hidden="true">#</a> Isang Malalim na Pagtingin sa sendTransaction</h3><p>Pagdating sa pagsusumite ng mga transaksyon, ang <code>sendTransaction</code> na paraan ng RPC ay ang pangunahing tool na available sa mga developer. Ang <code>sendTransaction</code> ay responsable lamang sa pag-relay ng isang transaksyon mula sa isang kliyente patungo sa isang RPC node. Kung natanggap ng node ang transaksyon, ibabalik ng <code>sendTransaction</code> ang transaction id na maaaring magamit upang subaybayan ang transaksyon. Ang isang matagumpay na tugon ay hindi nagsasaad kung ang transaksyon ay ipoproseso o isasapinal ng cluster.</p>',10),Ja={class:"custom-container tip"},Oa=a("p",{class:"custom-container-title"},"TIP",-1),Ga=a("h4",{id:"request-parameters",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#request-parameters","aria-hidden":"true"},"#"),n(" Request Parameters")],-1),Wa=a("li",null,[a("code",null,"transaksyon"),n(": "),a("code",null,"string"),n(" - ganap na nilagdaan na Transaksyon, bilang naka-encode na string")],-1),Ya=n("(opsyonal) "),Qa=a("code",null,"configuration object",-1),Xa=n(": "),Za=a("code",null,"object",-1),$a=a("li",null,[a("code",null,"skipPreflight"),n(": "),a("code",null,"boolean"),n(" - kung totoo, laktawan ang preflight transaction checks (default: false)")],-1),an=n("(opsyonal) "),nn=a("code",null,"preflightCommitment",-1),sn=n(": "),on=a("code",null,"string",-1),tn=n(" - "),en={href:"https://docs.solana.com/developing/clients/jsonrpc-api#configuring-state-commitment",target:"_blank",rel:"noopener noreferrer"},rn=n("Commitment"),ln=n(' na antas na gagamitin para sa preflight simulation laban sa slot ng bangko (default: "na-finalize").'),gn=a("li",null,[n("(opsyonal) "),a("code",null,"encoding"),n(": "),a("code",null,"string"),n(' - Encoding na ginagamit para sa data ng transaksyon. Alinman sa "base58" (mabagal), o "base64". (default: "base58").')],-1),cn=a("li",null,[n("(opsyonal) "),a("code",null,"maxRetries"),n(": "),a("code",null,"usize"),n(" - Maximum na dami ng beses para muling subukan ng RPC node na ipadala ang transaksyon sa pinuno. Kung hindi ibinigay ang parameter na ito, muling susubukan ng RPC node ang transaksyon hanggang sa ito ay ma-finalize o hanggang sa mag-expire ang blockhash.")],-1),pn=a("h4",{id:"response",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#response","aria-hidden":"true"},"#"),n(" Response")],-1),un=a("code",null,"transaction id",-1),kn=n(": "),dn=a("code",null,"string",-1),mn=n(" - Unang lagda ng transaksyon na naka-embed sa transaksyon, bilang base-58 na naka-encode na string. Ang transaction id na ito ay maaaring gamitin sa "),hn={href:"https://docs.solana.com/developing/clients/jsonrpc-api#getsignaturestatuses",target:"_blank",rel:"noopener noreferrer"},bn=n("getSignatureStatuses"),_n=n(" upang mag-poll para sa mga update sa status."),yn=a("h2",{id:"pag-customize-ng-rebroadcast-logic",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#pag-customize-ng-rebroadcast-logic","aria-hidden":"true"},"#"),n(" Pag-customize ng Rebroadcast Logic")],-1),fn=n("Upang makabuo ng kanilang sariling lohika sa pag-rebroadcast, dapat samantalahin ng mga developer ang parameter na "),wn=a("code",null,"maxRetries",-1),Pn=n(" ng "),vn=a("code",null,"sendTransaction",-1),Sn=n(". Kung ibinigay, i-o-override ng "),Tn=a("code",null,"maxRetries",-1),Rn=n(" ang default na retry logic ng RPC node, na magbibigay-daan sa mga developer na manu-manong kontrolin ang proseso ng muling pagsubok "),xn={href:"https://github.com/solana-labs/solana/blob/98707baec2385a4f7114d2167ef6dfb1406f954f/validator/src/main.rs#L1258-L1274",target:"_blank",rel:"noopener noreferrer"},Cn=n("sa loob ng makatwirang mga hangganan"),Bn=n("."),Kn=n("Ang isang karaniwang pattern para sa manu-manong muling pagsubok sa mga transaksyon ay kinabibilangan ng pansamantalang pag-iimbak ng "),Ln=a("code",null,"lastValidBlockHeight",-1),Mn=n(" na nagmumula sa "),An={href:"https://docs.solana.com/developing/clients/jsonrpc-api#getlatestblockhash",target:"_blank",rel:"noopener noreferrer"},jn=n("getLatestBlockhash"),Hn=n(". Kapag naitago na, maaaring "),zn={href:"https://docs.solana.com/developing/clients/jsonrpc-api#getblockheight",target:"_blank",rel:"noopener noreferrer"},Un=n("i-poll ng application ang blockheight ng cluster"),Vn=n(" at manu-manong subukang muli ang transaksyon sa naaangkop na agwat. Sa mga oras ng pagsisikip ng network, kapaki-pakinabang na itakda ang "),Dn=a("code",null,"maxRetries",-1),Nn=n(" sa 0 at manu-manong i-rebroadcast sa pamamagitan ng custom na algorithm. Bagama't maaaring gumamit ang ilang application ng algorithm ng "),In={href:"https://en.wikipedia.org/wiki/Exponential_backoff",target:"_blank",rel:"noopener noreferrer"},En=n("exponential backoff"),Fn=n(", ang iba tulad ng "),qn={href:"https://www.mango.markets/",target:"_blank",rel:"noopener noreferrer"},Jn=n("Mango"),On=n(" ay nag-opt na "),Gn={href:"https://github.com/blockworks-foundation/mango-ui/blob/b6abfc6c13b71fc17ebbe766f50b8215fa1ec54f/src/utils/send.tsx#L713",target:"_blank",rel:"noopener noreferrer"},Wn=n("tuloy na muling isumite "),Yn=n(" mga transaksyon sa pare-parehong pagitan hanggang sa magkaroon ng ilang timeout."),Qn=a("div",{class:"language-typescript ext-ts line-numbers-mode"},[a("pre",{class:"language-typescript"},[a("code",null,[a("span",{class:"token keyword"},"import"),n(),a("span",{class:"token punctuation"},"{"),n(`
  Keypair`),a("span",{class:"token punctuation"},","),n(`
  Connection`),a("span",{class:"token punctuation"},","),n(`
  `),a("span",{class:"token constant"},"LAMPORTS_PER_SOL"),a("span",{class:"token punctuation"},","),n(`
  SystemProgram`),a("span",{class:"token punctuation"},","),n(`
  Transaction`),a("span",{class:"token punctuation"},","),n(`
`),a("span",{class:"token punctuation"},"}"),n(),a("span",{class:"token keyword"},"from"),n(),a("span",{class:"token string"},'"@solana/web3.js"'),a("span",{class:"token punctuation"},";"),n(`
`),a("span",{class:"token keyword"},"import"),n(),a("span",{class:"token operator"},"*"),n(),a("span",{class:"token keyword"},"as"),n(" nacl "),a("span",{class:"token keyword"},"from"),n(),a("span",{class:"token string"},'"tweetnacl"'),a("span",{class:"token punctuation"},";"),n(`

`),a("span",{class:"token keyword"},"const"),n(),a("span",{class:"token function-variable function"},"sleep"),n(),a("span",{class:"token operator"},"="),n(),a("span",{class:"token keyword"},"async"),n(),a("span",{class:"token punctuation"},"("),n("ms"),a("span",{class:"token operator"},":"),n(),a("span",{class:"token builtin"},"number"),a("span",{class:"token punctuation"},")"),n(),a("span",{class:"token operator"},"=>"),n(),a("span",{class:"token punctuation"},"{"),n(`
  `),a("span",{class:"token keyword"},"return"),n(),a("span",{class:"token keyword"},"new"),n(),a("span",{class:"token class-name"},[a("span",{class:"token builtin"},"Promise")]),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),n("r"),a("span",{class:"token punctuation"},")"),n(),a("span",{class:"token operator"},"=>"),n(),a("span",{class:"token function"},"setTimeout"),a("span",{class:"token punctuation"},"("),n("r"),a("span",{class:"token punctuation"},","),n(" ms"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
`),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),n(`

`),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"async"),n(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),n(),a("span",{class:"token operator"},"=>"),n(),a("span",{class:"token punctuation"},"{"),n(`
  `),a("span",{class:"token keyword"},"const"),n(" payer "),a("span",{class:"token operator"},"="),n(" Keypair"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"generate"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  `),a("span",{class:"token keyword"},"const"),n(" toAccount "),a("span",{class:"token operator"},"="),n(" Keypair"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"generate"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),n("publicKey"),a("span",{class:"token punctuation"},";"),n(`

  `),a("span",{class:"token keyword"},"const"),n(" connection "),a("span",{class:"token operator"},"="),n(),a("span",{class:"token keyword"},"new"),n(),a("span",{class:"token class-name"},"Connection"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"http://127.0.0.1:8899"'),a("span",{class:"token punctuation"},","),n(),a("span",{class:"token string"},'"confirmed"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`

  `),a("span",{class:"token keyword"},"const"),n(" airdropSignature "),a("span",{class:"token operator"},"="),n(),a("span",{class:"token keyword"},"await"),n(" connection"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"requestAirdrop"),a("span",{class:"token punctuation"},"("),n(`
    payer`),a("span",{class:"token punctuation"},"."),n("publicKey"),a("span",{class:"token punctuation"},","),n(`
    `),a("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n(`
  `),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`

  `),a("span",{class:"token keyword"},"await"),n(" connection"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"confirmTransaction"),a("span",{class:"token punctuation"},"("),n("airdropSignature"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`

  `),a("span",{class:"token keyword"},"const"),n(" blockhashResponse "),a("span",{class:"token operator"},"="),n(),a("span",{class:"token keyword"},"await"),n(" connection"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"getLatestBlockhashAndContext"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  `),a("span",{class:"token keyword"},"const"),n(" lastValidBlockHeight "),a("span",{class:"token operator"},"="),n(" blockhashResponse"),a("span",{class:"token punctuation"},"."),n("context"),a("span",{class:"token punctuation"},"."),n("slot "),a("span",{class:"token operator"},"+"),n(),a("span",{class:"token number"},"150"),a("span",{class:"token punctuation"},";"),n(`

  `),a("span",{class:"token keyword"},"const"),n(" transaction "),a("span",{class:"token operator"},"="),n(),a("span",{class:"token keyword"},"new"),n(),a("span",{class:"token class-name"},"Transaction"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),n(`
    feePayer`),a("span",{class:"token operator"},":"),n(" payer"),a("span",{class:"token punctuation"},"."),n("publicKey"),a("span",{class:"token punctuation"},","),n(`
    blockhash`),a("span",{class:"token operator"},":"),n(" blockhashResponse"),a("span",{class:"token punctuation"},"."),n("value"),a("span",{class:"token punctuation"},"."),n("blockhash"),a("span",{class:"token punctuation"},","),n(`
    lastValidBlockHeight`),a("span",{class:"token operator"},":"),n(" lastValidBlockHeight"),a("span",{class:"token punctuation"},","),n(`
  `),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"add"),a("span",{class:"token punctuation"},"("),n(`
    SystemProgram`),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"transfer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),n(`
      fromPubkey`),a("span",{class:"token operator"},":"),n(" payer"),a("span",{class:"token punctuation"},"."),n("publicKey"),a("span",{class:"token punctuation"},","),n(`
      toPubkey`),a("span",{class:"token operator"},":"),n(" toAccount"),a("span",{class:"token punctuation"},","),n(`
      lamports`),a("span",{class:"token operator"},":"),n(),a("span",{class:"token number"},"1000000"),a("span",{class:"token punctuation"},","),n(`
    `),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),n(`
  `),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  `),a("span",{class:"token keyword"},"const"),n(" message "),a("span",{class:"token operator"},"="),n(" transaction"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"serializeMessage"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  `),a("span",{class:"token keyword"},"const"),n(" signature "),a("span",{class:"token operator"},"="),n(" nacl"),a("span",{class:"token punctuation"},"."),n("sign"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"detached"),a("span",{class:"token punctuation"},"("),n("message"),a("span",{class:"token punctuation"},","),n(" payer"),a("span",{class:"token punctuation"},"."),n("secretKey"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  transaction`),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"addSignature"),a("span",{class:"token punctuation"},"("),n("payer"),a("span",{class:"token punctuation"},"."),n("publicKey"),a("span",{class:"token punctuation"},","),n(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),n("signature"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  `),a("span",{class:"token keyword"},"const"),n(" rawTransaction "),a("span",{class:"token operator"},"="),n(" transaction"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"serialize"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  `),a("span",{class:"token keyword"},"let"),n(" blockheight "),a("span",{class:"token operator"},"="),n(),a("span",{class:"token keyword"},"await"),n(" connection"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"getBlockHeight"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`

  `),a("span",{class:"token keyword"},"while"),n(),a("span",{class:"token punctuation"},"("),n("blockheight "),a("span",{class:"token operator"},"<"),n(" lastValidBlockHeight"),a("span",{class:"token punctuation"},")"),n(),a("span",{class:"token punctuation"},"{"),n(`
    connection`),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"sendRawTransaction"),a("span",{class:"token punctuation"},"("),n("rawTransaction"),a("span",{class:"token punctuation"},","),n(),a("span",{class:"token punctuation"},"{"),n(`
      skipPreflight`),a("span",{class:"token operator"},":"),n(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),n(`
    `),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
    `),a("span",{class:"token keyword"},"await"),n(),a("span",{class:"token function"},"sleep"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"500"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
    blockheight `),a("span",{class:"token operator"},"="),n(),a("span",{class:"token keyword"},"await"),n(" connection"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"getBlockHeight"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  `),a("span",{class:"token punctuation"},"}"),n(`
`),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br"),a("span",{class:"line-number"},"39"),a("br"),a("span",{class:"line-number"},"40"),a("br"),a("span",{class:"line-number"},"41"),a("br"),a("span",{class:"line-number"},"42"),a("br"),a("span",{class:"line-number"},"43"),a("br"),a("span",{class:"line-number"},"44"),a("br"),a("span",{class:"line-number"},"45"),a("br"),a("span",{class:"line-number"},"46"),a("br"),a("span",{class:"line-number"},"47"),a("br"),a("span",{class:"line-number"},"48"),a("br"),a("span",{class:"line-number"},"49"),a("br"),a("span",{class:"line-number"},"50"),a("br"),a("span",{class:"line-number"},"51"),a("br"),a("span",{class:"line-number"},"52"),a("br"),a("span",{class:"line-number"},"53"),a("br"),a("span",{class:"line-number"},"54"),a("br")])],-1),Xn=a("div",{class:"language-typescript ext-ts line-numbers-mode"},[a("pre",{class:"language-typescript"},[a("code",null,[a("span",{class:"token keyword"},"while"),n(),a("span",{class:"token punctuation"},"("),n("blockheight "),a("span",{class:"token operator"},"<"),n(" lastValidBlockHeight"),a("span",{class:"token punctuation"},")"),n(),a("span",{class:"token punctuation"},"{"),n(`
  connection`),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"sendRawTransaction"),a("span",{class:"token punctuation"},"("),n("rawTransaction"),a("span",{class:"token punctuation"},","),n(),a("span",{class:"token punctuation"},"{"),n(`
    skipPreflight`),a("span",{class:"token operator"},":"),n(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),n(`
  `),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  `),a("span",{class:"token keyword"},"await"),n(),a("span",{class:"token function"},"sleep"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"500"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
  blockheight `),a("span",{class:"token operator"},"="),n(),a("span",{class:"token keyword"},"await"),n(" connection"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"getBlockHeight"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),n(`
`),a("span",{class:"token punctuation"},"}"),n(`
`)])]),a("div",{class:"line-numbers","aria-hidden":"true"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),Zn=n("Kapag nagbobotohan sa pamamagitan ng "),$n=a("code",null,"getLatestBlockhash",-1),as=n(", dapat tukuyin ng mga application ang kanilang nilalayon na "),ns={href:"https://docs.solana.com/developing/clients/jsonrpc-api#configuring-state-commitment",target:"_blank",rel:"noopener noreferrer"},ss=n("commitment"),os=n(" na antas. Sa pamamagitan ng pagtatakda ng commitment nito sa "),ts=a("code",null,"confirmed",-1),es=n(" (voted on) o "),is=a("code",null,"finalized",-1),rs=n(" (~30 blocks pagkatapos ng "),ls=a("code",null,"confirmed",-1),gs=n("), maiiwasan ng isang application ang pagboto ng blockhash mula sa minority fork."),cs=n("Kung ang isang application ay may access sa mga RPC node sa likod ng isang load balancer, maaari din nitong piliing hatiin ang workload nito sa mga partikular na node. Ang mga RPC node na naghahatid ng mga kahilingang masinsinan sa data gaya ng "),ps=n("getProgramAccounts"),us=n(" ay maaaring madaling mahuli at maaaring hindi angkop para sa pagpapasa ng mga transaksyon. Para sa mga application na nangangasiwa ng mga transaksyong sensitibo sa oras, maaaring maging maingat na magkaroon ng mga nakalaang node na humahawak lamang sa "),ks=a("code",null,"sendTransaction",-1),ds=n("."),ms=i('<h3 id="ang-gastos-ng-paglaktaw-preflight" tabindex="-1"><a class="header-anchor" href="#ang-gastos-ng-paglaktaw-preflight" aria-hidden="true">#</a> Ang Gastos ng Paglaktaw Preflight</h3><p>Bilang default, magsasagawa ang <code>sendTransaction</code> ng tatlong pagsusuri sa preflight bago magsumite ng transaksyon. Sa partikular, ang <code>sendTransaction</code> ay:</p><ul><li>I-verify na ang lahat ng mga lagda ay wasto</li><li>Suriin na ang isinangguni na blockhash ay nasa loob ng huling 150 na bloke</li><li>Gayahin ang transaksyon laban sa slot ng bangko na tinukoy ng <code>preflightCommitment</code></li></ul><p>Kung sakaling mabigo ang alinman sa tatlong pagsusuring ito bago ang paglipad, maglalabas ang <code>sendTransaction</code> ng error bago isumite ang transaksyon. Ang mga pagsusuri sa preflight ay kadalasang ang pagkakaiba sa pagitan ng pagkawala ng isang transaksyon at pagpapahintulot sa isang kliyente na maayos na pangasiwaan ang isang error. Upang matiyak na ang mga karaniwang error na ito ay isinasaalang-alang, inirerekomenda na ang mga developer ay panatilihing nakatakda ang <code>skipPreflight</code> sa <code>false</code>.</p><h3 id="kailan-muli-mag-sign-ng-mga-transaksyon" tabindex="-1"><a class="header-anchor" href="#kailan-muli-mag-sign-ng-mga-transaksyon" aria-hidden="true">#</a> Kailan Muli Mag-sign ng Mga Transaksyon</h3><p>Sa kabila ng lahat ng pagtatangka na mag-rebroadcast, maaaring may mga pagkakataon na ang isang kliyente ay kinakailangan na muling pumirma sa isang transaksyon. Bago muling pumirma sa anumang transaksyon, <strong>napakahalaga</strong> upang matiyak na ang blockhash ng paunang transaksyon ay nag-expire na. Kung valid pa rin ang paunang blockhash, posibleng tanggapin ng network ang parehong mga transaksyon. Sa isang end-user, lalabas ito na parang hindi nila sinasadyang nagpadala ng parehong transaksyon nang dalawang beses.</p>',6),hs=n("Sa Solana, ang isang na-drop na transaksyon ay maaaring ligtas na itapon kapag ang blockhash na tinutukoy nito ay mas luma kaysa sa "),bs=a("code",null,"lastValidBlockHeight",-1),_s=n(" na natanggap mula sa "),ys=a("code",null,"getLatestBlockhash",-1),fs=n(". Dapat subaybayan ng mga developer ang "),ws=a("code",null,"lastValidBlockHeight",-1),Ps=n(" na ito sa pamamagitan ng pag-query sa "),vs={href:"https://docs.solana.com/developing/clients/jsonrpc-api#getepochinfo",target:"_blank",rel:"noopener noreferrer"},Ss=a("code",null,"getEpochInfo",-1),Ts=n(" at paghahambing sa "),Rs=a("code",null,"blockHeight",-1),xs=n(" sa tugon. Kapag na-invalidate ang isang blockhash, maaaring muling pumirma ang mga kliyente gamit ang isang bagong query na blockhash."),Cs=a("h2",{id:"pasasalamat",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#pasasalamat","aria-hidden":"true"},"#"),n(" Pasasalamat")],-1),Bs=n("Maraming salamat kay Trent Nelson, "),Ks={href:"https://twitter.com/jacobvcreech",target:"_blank",rel:"noopener noreferrer"},Ls=n("Jacob Creech"),Ms=n(", White Tiger, Le Yafo, "),As={href:"https://twitter.com/buffalu__",target:"_blank",rel:"noopener noreferrer"},js=n("Buffalu"),Hs=n(", at "),zs={href:"https://twitter.com/jito_labs",target:"_blank",rel:"noopener noreferrer"},Us=n("Jito Labs"),Vs=n(" para sa kanilang pagsusuri at feedback.");function Ds(Ns,Is){const o=t("ExternalLinkIcon"),r=t("SolanaCodeGroupItem"),l=t("SolanaCodeGroup"),g=t("RouterLink");return p(),u(k,null,[f,a("p",null,[w,a("a",P,[v,s(o)]),S]),T,a("ol",null,[a("li",null,[R,a("a",x,[C,s(o)]),B]),a("li",null,[K,a("a",L,[M,s(o)])])]),A,j,H,a("p",null,[z,U,V,a("a",D,[N,s(o)]),I]),a("p",null,[E,a("a",F,[q,s(o)]),J,a("a",O,[G,s(o)]),W,a("a",Y,[Q,s(o)]),X]),Z,a("ul",null,[a("li",null,[a("a",$,[aa,s(o)])]),a("li",null,[a("a",na,[sa,s(o)])]),a("li",null,[a("a",oa,[ta,s(o)])]),a("li",null,[a("a",ea,[ia,s(o)])]),a("li",null,[a("a",ra,[la,s(o)])])]),ga,ca,a("ul",null,[a("li",null,[a("a",pa,[ua,s(o)]),ka]),a("li",null,[a("a",da,[ma,s(o)]),ha]),a("li",null,[a("a",ba,[_a,s(o)]),ya])]),a("p",null,[fa,a("a",wa,[Pa,s(o)]),va]),Sa,Ta,Ra,a("p",null,[xa,a("a",Ca,[Ba,s(o)]),Ka,La,Ma,Aa,ja]),a("p",null,[Ha,a("a",za,[Ua,s(o)]),Va,a("a",Da,[Na,s(o)]),Ia,Ea,Fa]),qa,a("div",Ja,[Oa,Ga,a("ul",null,[Wa,a("li",null,[Ya,Qa,Xa,Za,a("ul",null,[$a,a("li",null,[an,nn,sn,on,tn,a("a",en,[rn,s(o)]),ln]),gn,cn])])]),pn,a("ul",null,[a("li",null,[un,kn,dn,mn,a("a",hn,[bn,s(o)]),_n])])]),yn,a("p",null,[fn,wn,Pn,vn,Sn,Tn,Rn,a("a",xn,[Cn,s(o)]),Bn]),a("p",null,[Kn,Ln,Mn,a("a",An,[jn,s(o)]),Hn,a("a",zn,[Un,s(o)]),Vn,Dn,Nn,a("a",In,[En,s(o)]),Fn,a("a",qn,[Jn,s(o)]),On,a("a",Gn,[Wn,s(o)]),Yn]),s(l,null,{default:e(()=>[s(r,{title:"TS",active:""},{default:e(()=>[Qn]),preview:e(()=>[Xn]),_:1})]),_:1}),a("p",null,[Zn,$n,as,a("a",ns,[ss,s(o)]),os,ts,es,is,rs,ls,gs]),a("p",null,[cs,s(g,{to:"/fil/guides/get-program-accounts.html"},{default:e(()=>[ps]),_:1}),us,ks,ds]),ms,a("p",null,[hs,bs,_s,ys,fs,ws,Ps,a("a",vs,[Ss,s(o)]),Ts,Rs,xs]),Cs,a("p",null,[Bs,a("a",Ks,[Ls,s(o)]),Ms,a("a",As,[js,s(o)]),Hs,a("a",zs,[Us,s(o)]),Vs])],64)}var Fs=c(y,[["render",Ds]]);export{Fs as default};
